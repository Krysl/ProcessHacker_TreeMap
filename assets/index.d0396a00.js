import{d as F,s as N,h as ee,f as te,i as ne,a as D,g as oe,b as re,c as le}from"./vendor.a4355230.js";const ae=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function l(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(o){if(o.ep)return;o.ep=!0;const a=l(o);fetch(o.href,a)}};ae();const x=document.getElementById("sort-by-size");let p=localStorage.getItem("sort-by-size");p=p=="true";p===null&&(localStorage.setItem("sort-by-size",!0),p=!0);x.checked=p;x.onchange=e=>{localStorage.setItem("sort-by-size",x.checked),p=x.checked,console.log(`=> Sort by Size: ${p}`),m(null)};const P=new Map,ce=e=>{if(e.parent===null)return e.color="#888888",e.color;const t=e.data.name.replace("+...","");let l;return P.has(t)?l=P.get(t):(l=Math.random()*360,P.set(t,l)),ee(l,.65,.5+.05*e.depth).toString()},b="random by name",B=new Map([[b,ce]]);for(const e in F)if(e.startsWith("interpolate")){const t=F[e];B.set(e,l=>N([8,0],t)(l.height)),B.set(e+"2",l=>N([8,0],t)(l.depth))}const g=document.getElementById("color-mode");let A=localStorage.getItem("color-mode");A===null&&(localStorage.setItem("color-mode",b),A=b);for(let[e,t]of B){var I=document.createElement("option");I.value=e,I.innerHTML=e,e==A&&(I.selected=!0),g.appendChild(I)}let H=B.get(g.value);console.log(g.value);g.onchange=e=>{H=B.get(g.value),localStorage.setItem("color-mode",g.value),m(null)};let ie=0;function C(e){return new T("O-"+(e==null?"":e+"-")+ ++ie)}function T(e){this.id=e,this.href=new URL(`#${e}`,location)+""}T.prototype.toString=function(){return"url("+this.href+")"};function L(e){let t="";const l=1e3*1e3*1e3,c=1e3*1e3,o=1e3;return e>l?t=`${e/l} GB`:e>c?t=`${e/c} MB`:e>o?t=`${e/o} kB`:e==="null"?t="???":t=`${e} B`,t}const z=()=>document.body.clientHeight-document.getElementById("titlebar").clientHeight,W=()=>document.body.clientWidth;document.body.onresize=()=>m(null);te(",d");function se(e){let t=re(e).eachAfter(l=>{l.value=j(l.data)});return p&&(t=t.sort((l,c)=>j(c.data)-j(l.data))),console.log(t),ne().size([W(),z()]).paddingOuter(3).paddingTop(19).paddingInner(1).round(!0)(t)}let G;function m(e){e===null?e=G:G=e;const t=se(e),l=C("shadow"),c=D("#d3-output-svg");c&&c.remove();const o=D("#d3-output").append("svg").attr("id","d3-output-svg").attr("viewBox",[0,0,W(),z()]).style("font","10px sans-serif");o.append("filter").attr("id",l.id).append("feDropShadow").attr("flood-opacity",.3).attr("dx",0).attr("stdDeviation",3);const a=o.selectAll("g").data(oe(t,n=>n.depth)).join("g").attr("filter",l).selectAll("g").data(n=>n[1]).join("g").attr("transform",n=>`translate(${n.x0},${n.y0})`);return a.append("title").text(n=>{var r;return`${n.ancestors().reverse().map((u,f)=>f==0?null:`
`+"	".repeat(f-1)+(f>1?"\u21AA ":"")+u.data.name.replace("+...","")).join("")}
${S}:
	${L(n.data.privateBytes)}
${E}:
	${L(n.data.workingSet)}
${O}:
	${n.data.cpu}
cmd:
	${(r=n.data.commandLine)==null?void 0:r.replaceAll(" -",`
		-`)}`}),a.append("rect").attr("id",n=>(n.nodeUid=C("node")).id).attr("fill",n=>H(n)).attr("width",n=>n.x1-n.x0).attr("height",n=>n.y1-n.y0),a.append("clipPath").attr("id",n=>(n.clipUid=C("clip")).id).append("use").attr("xlink:href",n=>n.nodeUid.href),a.append("text").attr("clip-path",n=>n.clipUid).selectAll("tspan").data(n=>{let r=n.data.name.split(/(?=[A-Z][^A-Z ])/g);return(d===S||d===E)&&(r=r.concat(L(n.value))),d===O&&(r=r.concat(n.value)),r=r.concat(n.data.description),r}).join("tspan").text(n=>n),a.filter(n=>n.children).selectAll("tspan").attr("dx",3).attr("y",13),a.filter(n=>!n.children).selectAll("tspan").attr("x",3).attr("y",(n,r,u)=>`${(r===u.length-1)*.3+1.1+r}em`),o.node(),o.node()}const S="Private bytes",E="Working set",O="CPU",_=new Map([[S,e=>e.privateBytes],[E,e=>e.workingSet],[O,e=>e.cpu]]);let q=!1;const de=()=>q,R=e=>q=e,w=document.getElementById("data-src");let d=localStorage.getItem("data-src");d===null&&(localStorage.setItem("data-src",S),d=S);for(let[e,t]of _){var M=document.createElement("option");M.value=e,M.innerHTML=e,e==d&&(M.selected=!0),w.appendChild(M)}console.log(w.value);w.onchange=e=>{d=w.value,console.log(`=> Data Source: ${d}`),localStorage.setItem("data-src",w.value),m(null)};function j(e){const t=_.get(d)(e);return t==="null"&&de()===!1&&(alert(`Please Add Column "${d}" in Process Hacker`),R(!0)),t}function Z(e){let t=0;return e.includes("kB")?t=parseFloat(e)*1e3:e.includes("MB")?t=parseFloat(e)*1e3*1e3:e.includes("GB")?t=parseFloat(e)*1e3*1e3*1e3:e==="null"&&(t="null"),t}function ue(e){let t=0;return e==="null"?t="null":e===""?t=0:t=parseFloat(e),t}function K(e){var f,U;const t=e.indexOf('"'),l=le(e.slice(t)),c=e.slice(0,t-2);console.log(c),R(!1);let o={name:"/",privateBytes:0,workingSet:0,cpu:0,description:c,index:-1,depth:-1,children:[]},a=-1,n=o,r=o,u=[];for(let i=0;i<l.length;i++){const s=l[i];let v=s.Name;const J=v.length;v=v.trim();const h=(J-v.length)/2;let Q="";const V=s["Private bytes"],X=(f=s["Working set"])!=null?f:"null",Y=(U=s.CPU)!=null?U:"null",k={name:v.replace(".exe",""),privateBytes:Z(V),workingSet:Z(X),cpu:ue(Y),description:s.Description,commandLine:s["Command line"],index:i,depth:h,children:null};if(h>a){const y={name:r.name,privateBytes:r.privateBytes,workingSet:r.workingSet,cpu:r.cpu,description:r.description,commandLine:r.commandLine,index:r.index+.5,depth:r.depth+1,children:null};r.name+="+...",r.privateBytes=0,r.workingSet=0,r.children=[y],n=r,n.children.push(k),u.push(n)}else if(h==a)n.children.push(k);else if(h<a){let y=a-h;for(;y--;)u.pop();n=u[u.length-1],n.children.push(k)}a=h,r=k;for(const y of u)Q+=y.name+"/"}return console.log(o),$(o,i=>i.privateBytes,(i,s)=>i.privateBytes=s),$(o,i=>i.workingSet,(i,s)=>i.workingSet=s),$(o,i=>i.cpu,(i,s)=>i.cpu=s),o}function $(e,t,l){let c=0;return e.children?c=e.children.map(o=>$(o,t,l)).reduce((o,a)=>o+a):c=t(e),l(e,c),c}const pe=document.getElementById("tips"),fe=document.getElementById("inputfile");fe.addEventListener("change",function(){var e=new FileReader;e.onload=function(){const t=K(e.result);pe.innerText=t.description.split(`\r
`).join(", "),m(t)},e.readAsText(this.files[0])});fetch("Process Hacker Processes.csv").then(function(e){return e.text()}).then(function(e){const t=K(e);m(t)});
